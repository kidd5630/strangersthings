(this.webpackJsonpCourseWork=this.webpackJsonpCourseWork||[]).push([[0],{34:function(e,t,s){"use strict";s.r(t);var c=s(2),n=s.n(c),a=s(4),r=s(3),o=s(1),i=s(20),l=s.n(i),j=s(5),u=s(6),d=s(0),p=function(){return Object(d.jsx)("div",{className:"aside",children:Object(d.jsx)("h2",{children:"Please Login or Register to Create Posts or Send Messages "})})},b=s(12),h="https://strangers-things.herokuapp.com/api/2105-VPI-RM-WEB-PT/";function O(e,t,s){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(n.a.mark((function e(t,s,c){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:s,password:c}})});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function x(e,t,s){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(n.a.mark((function e(t,s,c){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:s,password:c}})});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function v(e,t,s,c,n,a,r){return P.apply(this,arguments)}function P(){return(P=Object(a.a)(n.a.mark((function e(t,s,c,a,r,o,i){var l,j,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={title:c,description:a,price:r,willDeliver:i},o&&(l.location=o),e.prev=2,e.next=5,fetch("".concat(t,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({post:l})});case 5:return j=e.sent,e.next=8,j.json();case 8:return u=e.sent,e.abrupt("return",u);case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function N(e,t,s){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(n.a.mark((function e(t,s,c){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/posts/").concat(s),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c}});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(){return(g=Object(a.a)(n.a.mark((function e(){var t,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"/posts"));case 3:return t=e.sent,e.next=6,t.json();case 6:return s=e.sent,e.next=9,s.data.posts;case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(n.a.mark((function e(t,s){var c,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(e,t,s,c){return T.apply(this,arguments)}function T(){return(T=Object(a.a)(n.a.mark((function e(t,s,c,a){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/posts/").concat(s,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c},body:JSON.stringify({message:{content:a}})});case 3:return r=e.sent,e.next=6,r.json();case 6:return o=e.sent,e.abrupt("return",o);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(e,t,s,c,n,a,r,o){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(n.a.mark((function e(t,s,c,a,r,o,i,l){var j,u,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j={},a&&(j.title=a),r&&(j.description=r),o&&(j.price=o),i&&(j.location=i),l&&(j.willDeliver=l),e.prev=6,e.next=9,fetch("".concat(t,"/posts/").concat(s),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c},body:JSON.stringify({post:j})});case 9:return u=e.sent,e.next=12,u.json();case 12:return d=e.sent,e.abrupt("return",d);case 16:e.prev=16,e.t0=e.catch(6),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var L=function(e){var t=e.userToken,s=e.allPosts,c=e.setAllPosts,i=Object(o.useState)(""),l=Object(r.a)(i,2),j=l[0],u=l[1],p=Object(o.useState)(""),O=Object(r.a)(p,2),m=O[0],x=O[1],f=Object(o.useState)(""),P=Object(r.a)(f,2),N=P[0],y=P[1],g=Object(o.useState)(""),k=Object(r.a)(g,2),S=k[0],C=k[1],T=Object(o.useState)(!1),w=Object(r.a)(T,2),I=w[0],L=w[1];function U(){u(""),x(""),y(""),C(""),L(!1)}function M(){return(M=Object(a.a)(n.a.mark((function e(a){var r,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,v(h,t,j,m,N,S,I);case 4:(r=e.sent).success&&(o=r.data.post,c([].concat(Object(b.a)(s),[o])),U()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(d.jsxs)("section",{className:"makePostsAside",children:[Object(d.jsx)("h1",{className:"makePostTitle",children:"Make Posts Here"}),Object(d.jsxs)("form",{className:"makePostForm",onSubmit:function(e){return M.apply(this,arguments)},children:[Object(d.jsxs)("div",{className:"makePostContent",children:[Object(d.jsx)("label",{className:"makePostLabel",children:"Title"}),Object(d.jsx)("input",{className:"makePostInput",type:"text",placeholder:"Title",value:j,required:!0,onChange:function(e){u(e.target.value)}})]}),Object(d.jsxs)("div",{className:"makePostContent",children:[Object(d.jsx)("label",{className:"makePostLabel",children:"Description"}),Object(d.jsx)("input",{className:"makePostInput",type:"text",placeholder:"Description",value:m,required:!0,onChange:function(e){x(e.target.value)}})]}),Object(d.jsxs)("div",{className:"makePostContent",children:[Object(d.jsx)("label",{className:"makePostLabel",children:"Price"}),Object(d.jsx)("input",{className:"makePostInput",type:"text",placeholder:"Price",value:N,required:!0,onChange:function(e){y(e.target.value)}})]}),Object(d.jsxs)("div",{className:"makePostContent",children:[Object(d.jsx)("label",{className:"makePostLabel",children:"Location"}),Object(d.jsx)("input",{className:"makePostInput",type:"text",placeholder:"Location",value:S,onChange:function(e){C(e.target.value)}})]}),Object(d.jsxs)("div",{className:"makePostCheck",children:[Object(d.jsx)("input",{className:"checkbox",type:"checkbox",id:"willDeliver",checked:I,onChange:function(){document.querySelector("#willDeliver:checked")?L(!0):L(!1)}}),Object(d.jsx)("label",{className:"makePostLabel",children:"Will Deliver"})]}),Object(d.jsx)("button",{className:"makePostSubmit",type:"submit",children:"Make Post!"})]})]})},U=function(e){var t=e.userToken,s=e.myUsername,c=e.allPosts,n=e.setAllPosts,a=e.setSelectedPost,i=e.postID,l=Object(o.useState)(""),u=Object(r.a)(l,2),b=u[0],h=u[1];var O=c.filter((function(e){return function(e,t){var s=e.title,c=e.description,n=e.price,a=e.author.username,r=e.location;if(s.toLowerCase().includes(t.toLowerCase())||c.toLowerCase().includes(t.toLowerCase())||n.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase()))return!0}(e,b)})),m=b.length?O:c;return t?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"allPostsContainer",children:[Object(d.jsxs)("div",{className:"allPostsHeader",children:[Object(d.jsx)("h1",{className:"searchTitle",children:" Search Posts"}),Object(d.jsx)("input",{className:"searchBar",type:"text",placeholder:"Search",onChange:function(e){h(e.target.value)}})]}),c&&m.map((function(e){var t=e._id,c=e.title,n=e.description,r=e.price,o=e.author.username,l=e.location;return Object(d.jsxs)("div",{className:"allposts",children:[Object(d.jsx)("h3",{className:"postTitle",onClick:function(){i(t),a(t)},children:Object(d.jsx)(j.b,{to:"/post/".concat(t),className:"postsLink",children:c})}),Object(d.jsx)("p",{className:"description",children:n}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Price:"})," ",r]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Seller:"})," ",o]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Location:"})," ",l]}),o===s?Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:Object(d.jsx)("li",{className:"postLi",onClick:function(){i(t),a(t)},children:Object(d.jsx)(j.b,{to:"/post/".concat(t),className:"postsLink",children:"Take Me To My Post"})})})}):Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:Object(d.jsx)("li",{className:"postLi",onClick:function(){i(t),a(t)},children:Object(d.jsx)(j.b,{to:"/post/".concat(t),className:"postsLink",children:"Message About Post"})})})})]},t)})),Object(d.jsx)("div",{className:"allPostsAside",children:Object(d.jsx)(L,{allPosts:c,setAllPosts:n,userToken:t})})]})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"allPostsContainer",children:[Object(d.jsx)("div",{className:"allPostsAside",children:Object(d.jsx)(p,{})}),c.map((function(e){return Object(d.jsxs)("div",{className:"allposts",children:[Object(d.jsx)("h3",{className:"postTitle",children:e.title}),Object(d.jsx)("p",{className:"description",children:e.description}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Price:"})," ",e.price]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Seller:"})," ",e.author.username]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Location:"})," ",e.location]})]},e._id)}))]})})},M=function(e){var t=e.setMyPassword,s=e.myPassword,c=e.setMyUsername,r=e.myUsername,o=e.setUserToken,i=Object(u.f)();function l(){return(l=Object(a.a)(n.a.mark((function e(t){var a,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x(h,r,s);case 4:if(!(a=e.sent).success){e.next=16;break}return e.next=8,a.data.token;case 8:l=e.sent,o(l),c(r),localStorage.setItem("userToken",JSON.stringify(l)),localStorage.setItem("myUsername",JSON.stringify(r)),i.push("/profile"),e.next=17;break;case 16:alert(a.error.message);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}return Object(d.jsxs)("section",{className:"loginContainer",children:[Object(d.jsx)("h1",{className:"loginTitle",children:"Login"}),Object(d.jsxs)("form",{className:"loginForm",onSubmit:function(e){return l.apply(this,arguments)},children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Username",className:"loginInput",onChange:function(e){c(e.target.value)},required:!0})}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Password",className:"loginInput",onChange:function(e){t(e.target.value)},required:!0})}),Object(d.jsx)("button",{className:"loginBtn",type:"submit",children:"LOGIN"})]})]})},D=function(e){var t=e.userToken,s=e.postDeleted,c=e.allPosts,r=e.setAllPosts,i=e.setSelectedPost,l=e.postID,u=e.myUsername;return Object(o.useEffect)(Object(a.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r(Object(b.a)(c))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)}))),[s]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"profileBodyHeader",children:" My Posts"}),Object(d.jsxs)("div",{className:"myPostsContainer",children:[c.map((function(e){var t=e._id,s=e.title,c=e.description,n=e.price,a=e.author.username,r=e.location;return e.active&&u===a?Object(d.jsxs)("div",{className:"allposts myPosts",children:[Object(d.jsx)("h3",{onClick:function(){l(t),i(t)},children:Object(d.jsx)(j.b,{to:"/post/".concat(t),className:"postsLink myPosts",children:s})}),Object(d.jsx)("p",{className:"description",children:c}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Price:"})," ",n]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Location:"})," ",r]}),Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:Object(d.jsx)("li",{className:"postLi myPosts",onClick:function(){l(t),i(t)},children:Object(d.jsx)(j.b,{to:"/post/".concat(t),className:"postsLink myPosts",children:"Take Me To My Post"})})})})]},t):void 0})),Object(d.jsx)("div",{className:"allPostsAside",children:Object(d.jsx)(L,{allPosts:c,setAllPosts:r,userToken:t})})]})]})},A=function(e){var t=e.userToken,s=e.myUsername,c=e.setSelectedPost,i=e.postID,l=Object(o.useState)([]),u=Object(r.a)(l,2),p=u[0],b=u[1];return Object(o.useEffect)(Object(a.a)(n.a.mark((function e(){var s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(h,t);case 3:s=e.sent,c=s.data.messages,b(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"profileBodyHeader",children:" Sent Messages"}),Object(d.jsx)("div",{children:p.map((function(e){return e.fromUser.username===s?Object(d.jsxs)("div",{className:"messages",children:[Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:Object(d.jsx)("li",{className:"postLi",onClick:function(){c(e.post._id),i(e.post._id)},children:Object(d.jsxs)(j.b,{to:"/post/".concat(e.post._id),className:"postsLink",children:["Message Again: ",e.post.title]})})})}),Object(d.jsx)("p",{children:e.content})]},e._id):void 0}))})]})},B=function(e){var t=e.userToken,s=e.myUsername,c=e.setSelectedPost,i=e.postID,l=Object(o.useState)([]),u=Object(r.a)(l,2),p=u[0],b=u[1];return Object(o.useEffect)(Object(a.a)(n.a.mark((function e(){var s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(h,t);case 3:s=e.sent,c=s.data.messages,b(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"profileBodyHeader",children:" Received Messages"}),Object(d.jsx)("div",{children:p.map((function(e){if(e.fromUser.username!==s)return Object(d.jsxs)("div",{className:"messages",children:[Object(d.jsxs)("h3",{children:["MESSAGE FROM: ",e.fromUser.username]}),Object(d.jsx)("p",{children:e.content}),Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:Object(d.jsx)("li",{className:"postLi",onClick:function(){c(e.post._id),i(e.post._id)},children:Object(d.jsxs)(j.b,{to:"/post/".concat(e.post._id),className:"postsLink",children:["View My Post: ",e.post.title]})})})})]},e._id)}))})]})},E=function(e){var t=e.userToken,s=e.allPosts,c=e.setAllPosts,i=e.selectedPost,l=e.ToggleClass,j=Object(o.useState)(""),u=Object(r.a)(j,2),p=u[0],O=u[1],m=Object(o.useState)(""),x=Object(r.a)(m,2),f=x[0],v=x[1],P=Object(o.useState)(""),N=Object(r.a)(P,2),y=N[0],g=N[1],k=Object(o.useState)(""),S=Object(r.a)(k,2),C=S[0],T=S[1],I=Object(o.useState)(!1),L=Object(r.a)(I,2),U=L[0],M=L[1];function D(){O(""),v(""),g(""),T(""),M(!1)}function A(){return(A=Object(a.a)(n.a.mark((function e(a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,w(h,i,t,p,f,y,C,U);case 4:r=e.sent,console.log(r),r.success&&(c(Object(b.a)(s)),l(),D()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(d.jsxs)("section",{className:"editPostsAside",children:[Object(d.jsx)("h1",{className:"editPostTitle",children:"Edit Posts Here"}),Object(d.jsxs)("form",{className:"edutPostForm",onSubmit:function(e){return A.apply(this,arguments)},children:[Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("label",{className:"editPostLabel",children:"Title"})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("input",{className:"editPostInput",type:"text",placeholder:"Title",value:p,onChange:function(e){O(e.target.value)}})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("label",{className:"editPostLabel",children:"Description"})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("input",{className:"editPostInput",type:"text",placeholder:"Description",value:f,onChange:function(e){v(e.target.value)}})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("label",{className:"editPostLabel",children:"Price"})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("input",{className:"editPostInput",type:"text",placeholder:"Price",value:y,onChange:function(e){g(e.target.value)}})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("label",{className:"editPostLabel",children:"Location"})}),Object(d.jsx)("div",{className:"editPostContent",children:Object(d.jsx)("input",{className:"editPostInput",type:"text",placeholder:"Location",value:C,onChange:function(e){T(e.target.value)}})}),Object(d.jsxs)("div",{className:"editPostCheck",children:[Object(d.jsx)("input",{className:"checkbox",type:"checkbox",id:"willDeliver",checked:U,onChange:function(){document.querySelector("#willDeliver:checked")?M(!0):M(!1)}}),Object(d.jsx)("label",{className:"editPostLabel",children:"Will Deliver"})]}),Object(d.jsx)("button",{className:"editPostSubmit",type:"submit",children:"Update Post!"})]})]})},F=function(e){var t=e.userToken,s=e.deleteItem,c=e.allPosts,i=e.setAllPosts,l=e.myUsername,j=e.selectedPost,p=Object(o.useState)(""),b=Object(r.a)(p,2),O=b[0],m=b[1],x=Object(o.useState)([]),f=Object(r.a)(x,2),v=f[0],P=f[1],N=Object(o.useState)("false"),y=Object(r.a)(N,2),g=y[0],S=y[1],T=Object(o.useState)("true"),w=Object(r.a)(T,2),I=w[0],L=w[1],U=Object(u.f)();Object(o.useEffect)(Object(a.a)(n.a.mark((function e(){var s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(h,t);case 3:s=e.sent,c=s.data.messages,P(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]);var M=function(){S(!g),L(!I)};function D(){return(D=Object(a.a)(n.a.mark((function e(s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(h,s,t,O);case 3:e.sent.success&&A(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function A(){m("")}if(t)return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"ipForm",children:c.map((function(e){var n=e._id,a=e.title,r=e.description,o=e.price,u=e.author.username,p=e.location;if(e.active&&n===j)return Object(d.jsxs)("div",{className:"allposts",children:[Object(d.jsxs)("div",{className:"IPText",children:[Object(d.jsx)("h3",{children:a}),Object(d.jsx)("p",{className:"description",children:r}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Price:"})," ",o]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Seller:"})," ",u]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("b",{children:"Location:"})," ",p]})]}),u===l?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"edit button",onClick:M,children:"Edit"}),Object(d.jsx)("button",{className:"delete button",onClick:function(){s(n),U.push("/profile")},children:"Delete"})]}),Object(d.jsxs)("div",{className:"ipInteractiveBox",children:[Object(d.jsx)("div",{className:"editFeild-".concat(g?"inactive":"active"),children:Object(d.jsx)(E,{userToken:t,allPosts:c,setAllPosts:i,selectedPost:j,ToggleClass:M})}),Object(d.jsxs)("div",{className:"messageFeild-".concat(I?"active":"inactive"),children:[Object(d.jsx)("h2",{className:"messageFeildHeader",children:"MESSAGES FOR THIS POST"}),v&&v.map((function(e){if(e.fromUser.username!==l&&e.post._id===j)return Object(d.jsxs)("div",{className:"messages",children:[Object(d.jsxs)("h3",{children:["MESSAGE FROM: ",e.fromUser.username]}),Object(d.jsx)("p",{children:e.content})]},e._id)}))]})]})]}):Object(d.jsxs)("div",{className:"sendMessageFeild",children:[Object(d.jsx)("input",{className:"sendMessageInput",type:"text",placeholder:"Your Message Here",value:O,required:!0,onChange:function(e){m(e.target.value)}}),Object(d.jsx)("button",{className:"sendMessageBtn",onClick:function(){!function(e){D.apply(this,arguments)}(n)},children:"Send Your Message"})]})]},n)}))})})},J=function(e){var t=e.myUsername,s=e.userToken,c=e.postDeleted,n=e.deleteItem,a=e.allPosts,r=e.setAllPosts,o=e.selectedPost,i=e.setSelectedPost,l=e.postID,p=Object(u.g)();return Object(d.jsx)(j.a,{children:Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"profileMenu",children:[Object(d.jsxs)("h1",{className:"welcomMessage",children:["Welcome ",t]}),Object(d.jsx)("nav",{className:"profile",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{className:"profileBtn",children:Object(d.jsx)(j.b,{to:"".concat(p.url,"/my-posts"),className:"profileLink",children:"My Posts"})}),Object(d.jsx)("li",{className:"profileBtn",children:Object(d.jsx)(j.b,{to:"".concat(p.url,"/sent-messages"),className:"profileLink",children:"Sent Messages"})}),Object(d.jsx)("li",{className:"profileBtn",children:Object(d.jsx)(j.b,{to:"".concat(p.url,"/received-messages"),className:"profileLink",children:"Received Messages"})})]})})]}),Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{path:"".concat(p.path,"/my-posts"),children:Object(d.jsx)(D,{userToken:s,postDeleted:c,allPosts:a,setAllPosts:r,setSelectedPost:i,postID:l,myUsername:t})}),Object(d.jsx)(u.a,{path:"".concat(p.path,"/sent-messages"),children:Object(d.jsx)(A,{userToken:s,myUsername:t,setSelectedPost:i,postID:l})}),Object(d.jsx)(u.a,{path:"".concat(p.path,"/received-messages"),children:Object(d.jsx)(B,{userToken:s,myUsername:t,setSelectedPost:i,postID:l})}),Object(d.jsx)(u.a,{path:"/post/:id",children:Object(d.jsx)(F,{myUsername:t,allPosts:a,setAllPosts:r,userToken:s,deleteItem:n,selectedPost:o})}),Object(d.jsx)(u.a,{exact:!0,path:"/profile",children:Object(d.jsx)(B,{userToken:s,myUsername:t,setSelectedPost:i,selectedPost:o,postID:l})})]})]})})},_=function(e){var t=e.setUserToken,s=e.setMyPassword,c=e.myPassword,i=e.setMyUsername,l=e.myUsername,j=Object(o.useState)(""),p=Object(r.a)(j,2),b=p[0],m=p[1],x=Object(u.f)();function f(){return(f=Object(a.a)(n.a.mark((function e(s){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),c===b){e.next=5;break}alert("please make sure your passwords match"),e.next=26;break;case 5:return e.prev=5,e.next=8,O(h,l,c);case 8:if(!(a=e.sent).success){e.next=20;break}return e.next=12,a.data.token;case 12:r=e.sent,t(r),i(l),localStorage.setItem("userToken",JSON.stringify(r)),localStorage.setItem("myUsername",JSON.stringify(l)),x.push("/profile"),e.next=21;break;case 20:alert(a.error.message);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})))).apply(this,arguments)}return Object(d.jsxs)("section",{className:"registerContainer",children:[Object(d.jsx)("h1",{className:"registerTitle",children:"Register"}),Object(d.jsxs)("form",{className:"registerForm",onSubmit:function(e){return f.apply(this,arguments)},children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Username",className:"registerInput",onChange:function(e){i(e.target.value)},required:!0})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Password",className:"registerInput",onChange:function(e){s(e.target.value)},required:!0})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",placeholder:"Confirm Password",className:"registerInput",onChange:function(e){m(e.target.value)},required:!0})}),Object(d.jsx)("button",{className:"registerbtn",type:"submit",children:"REGISTER"})]})]})};var R=function(e){var t=e.userToken,s=e.setUserToken,c=e.setMyUsername,n=e.setSelectedPost,a=Object(u.f)();return Object(d.jsxs)("div",{id:"title",children:[Object(d.jsx)(j.b,{to:"/posts",style:{textDecoration:"none",fontSize:"26px"},children:Object(d.jsx)("h1",{className:"title",children:"Stranger's Things"})}),t?Object(d.jsx)("nav",{children:Object(d.jsx)("div",{className:"profileBox",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)(j.b,{to:"/profile",children:Object(d.jsx)("li",{className:"navBtn",children:"PROFILE"})}),Object(d.jsx)(j.b,{to:"/posts",children:Object(d.jsx)("li",{className:"navBtn",children:"POSTS"})}),Object(d.jsx)("button",{className:"navBtn",onClick:function(){s(void localStorage.removeItem("userToken")),c(void localStorage.removeItem("myUsername")),n(localStorage.removeItem("postId")),a.push("/")},children:"LOGOUT"})]})})}):Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{children:[Object(d.jsx)(j.b,{to:"/login",children:Object(d.jsx)("li",{className:"navBtn",children:"LOGIN"})}),Object(d.jsx)(j.b,{to:"/register",children:Object(d.jsx)("li",{className:"navBtn",children:"REGISTER"})})]})})]})},q=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1],i=Object(o.useState)(JSON.parse(localStorage.getItem("userToken"))),l=Object(r.a)(i,2),p=l[0],b=l[1],O=Object(o.useState)(JSON.parse(localStorage.getItem("myUsername"))),m=Object(r.a)(O,2),x=m[0],f=m[1],v=Object(o.useState)(""),P=Object(r.a)(v,2),y=P[0],k=P[1],S=Object(o.useState)(0),C=Object(r.a)(S,2),T=C[0],w=C[1],I=Object(o.useState)([]),L=Object(r.a)(I,2),D=(L[0],L[1],Object(o.useState)(JSON.parse(localStorage.getItem("postId")))),A=Object(r.a)(D,2),B=A[0],E=A[1];function q(e){return H.apply(this,arguments)}function H(){return(H=Object(a.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(h,t,p);case 2:e.sent.success&&w(T+1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){localStorage.removeItem("postId"),localStorage.setItem("postId",JSON.stringify(e))}return Object(o.useEffect)((function(){(function(){return g.apply(this,arguments)})().then((function(e){c(e)})).catch((function(e){return console.error(e)}))}),[T]),Object(d.jsx)(j.a,{children:Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)(R,{userToken:p,setUserToken:b,setMyUsername:f,setSelectedPost:E}),p?Object(d.jsx)("div",{children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/profile",children:Object(d.jsx)(J,{myUsername:x,userToken:p,postDeleted:T,deleteItem:q,allPosts:s,setAllPosts:c,selectedPost:B,setSelectedPost:E,postID:G})}),Object(d.jsx)(u.a,{path:"/posts",children:Object(d.jsx)(U,{userToken:p,myUsername:x,allPosts:s,setAllPosts:c,setSelectedPost:E,postID:G})}),Object(d.jsx)(u.a,{path:"/post/:id",children:Object(d.jsx)(F,{myUsername:x,allPosts:s,setAllPosts:c,userToken:p,selectedPost:B,deleteItem:q})}),Object(d.jsx)(u.a,{exact:!0,path:"/",children:Object(d.jsx)(J,{myUsername:x,userToken:p,postDeleted:T,deleteItem:q,allPosts:s,setAllPosts:c,selectedPost:B,setSelectedPost:E,postID:G})})]})}):Object(d.jsx)("div",{children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{path:"/register",children:Object(d.jsx)(_,{setUserToken:b,myUsername:x,setMyUsername:f,myPassword:y,setMyPassword:k})}),Object(d.jsx)(u.a,{path:"/login",children:Object(d.jsx)(M,{myUsername:x,setMyUsername:f,myPassword:y,setMyPassword:k,setUserToken:b})}),Object(d.jsx)(u.a,{exact:!0,path:"/",children:Object(d.jsx)(U,{allPosts:s,setAllPosts:c})})]})})]})})};l.a.render(Object(d.jsx)(q,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.cd8df8ae.chunk.js.map